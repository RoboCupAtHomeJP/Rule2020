# General Purpose Service Robot

*The English version is [here](gpsr_en.md)*

本競技はこれまでのRoboCupのルールブックにおけるStage 1の競技全般で求められるロボットの能力を評価するためのものである．本競技ではロボットは要求に応じて複数のタスクを実行しなければならない．この競技において，予め決められたストーリーや命令，行動内容などは存在しない．ロボットが実行しなければならない行動は，レフリーによってランダムに大量に用意した命令セットの中から選択される．これらの命令は複雑さに応じて３つのカテゴリに分類され，得点の付与もこの難易度に基づく．

## Focus
1. 予め定義されていない命令の実行
2. 複雑な音声認識
3. 高度な環境推論
4. 効率的かつスピーディなタスクの実行

## Task

- 10分の間に，最大3回 以下を繰り返す．
- 基本的にルールはルールブック(RoboCup 2018世界大会で使用したもの)に従う．

 1. entering and command retrieval
	- ドアオープンスタート
	- 命令を聞く場所に移動して命令を待つ．

 2. command generation
 	- チームがレフェリーに希望するカテゴリを伝える
 	- Generatorで命令を生成，オペレータ(レフェリー)が命令を出す
 	- レフェリーの命令を聞き取れない場合，再発話，custom operatorの交代，Continue rule適用が認められる．
 	- custom operatorへの変更はいつでも要求できる
 	- 一つの命令文はレフェリー，custom operator含め最大3回までロボットに与えることができ，3回とも理解できなければ次の命令を発行する
 	- 1競技あたり3つの命令が生成され，それぞれ3回ロボットへの再発話が許され，すべて使い果たした場合競技終了となる
	- Predefined questionsは使用せず，これが関わるコマンドが生成された場合スキップし，再度命令の生成を行う

 3. command categories
	1. **Category Ⅰ:** 難易度の低いタスク
	2. **Category Ⅱ:** 中級のタスク
	3. **Category Ⅲ:** 高難易度タスクまたは，不足した情報/間違った情報を含む命令が与えられる

 4. task assignment
	- オペレータから命令を受け取ったあと復唱し行動開始
	- 受け取った命令で不足する情報があればロボットから人間に聞くことが出来る(再度命令を繰り返す場合は，command generationの回数制限にカウントする)．

 5. returning to the operator
	- ロボットは与えられたタスク終了後，次の命令のためにオペレータのもとへ戻ってくる(再度ドアオープンしてアリーナに入る必要はない)
	- ロボットは競技時間内で3つの命令をこなす
	- 3つ目の命令のタスクを終えたらロボットはアリーナから退出しなければならない

 6. Exit the arena
	- 最後の命令のタスクの終了後，ロボットはアリーナから退出しなければならない

## Additional Rules and Remarks
1. **レフェリー:** 本競技のスコアシステムはレフリーの主観的な評価に依存している(命令を正しく完了したかどうかの判断はレフリーに委ねられている)

2. **カテゴリの選択:** ロボットに与えられる３つの命令に対してそれぞれチームはコマンドカテゴリを選択することができる

3. **オペレータ:**
	* ロボットのオペレータはレフリーの中の一人が行う(default operator)
	* ロボットが一貫してオペレータの命令を理解できないようだとレフリーが判断した場合，レフリーはチームにカスタムオペレータへの変更や音声認識のバイパスをするかどうか問い合わせる

4. **命令の復唱：** ロボットは与えられた命令を復唱することで命令を理解したことを明らかにしなければならない．ただし，聞き取った命令文を一言一句同じものを繰り返す必要はなく，言い換えで良い．ただし，コマンドの実行に必要な情報をすべて含んでいること．
Note: ロボットがコマンド実行に挑戦することなくスキップした場合は，命令理解のスコアは与えない．

5. **何もせずに次の質問へ移行することの禁止：**
2回目，3回目の命令を達成するとスコアが高くなるため，あえて命令を聞き取るだけにとどめて，何もせずに戻ってきて次の命令にトライすることは禁止する．タスク達成のために何らかの挑戦を行わなければならない．また，2回目，3回目の命令のスコアの扱いは1回目，2回目のタスクを達成できたかどうか判断する必要があり，これはTCの判断に委ねられる．
<NEW> 一つ前のコマンドを正しく実行できなかった場合，次のコマンドを成功させても，得点の増加は行わない．つまり，1回目失敗し2回目成功の場合，2回目の得点はScore sheetの"First Command Successfully Solved"に該当する．

6. **Command Generatorの事前公開：**
RoboCup@Homeの[GitHubに公開されているコマンドジェネレータ](https://github.com/RoboCupAtHome/Montreal2018)を使用する(2018 Montreal 世界大会)．しかし，カテゴリやオブジェクト，場所名などは本番用に向けて変更されるので，あくまでテスト用としての使用に限る．

7. **リスタート：**
リスタートは認めない．

8. **Category 3実施の事前申告：**
挑戦するチームはいますか？実施する場合は大会１週間前までにGitHubのIssueにて宣言してください．運営側の準備が必要です．

9. **Data recording：**
data recordingによる得点加算は行わない．

## OC Instructions
1. **Setup dayに以下を公開**
- 部屋，ロケーションの名称
- 入り口と出口
- オブジェクト
- 命令を聞く場所

## Score Sheet

- タスクの制限時間は10分である．
- 各コマンド実行の部分点については考慮する

|Action　　　　　　　　　　　　　　　|Score　　　|
|:-|-:|
|||
|***Getting instructions:***||
|	1回目で命令を理解できた					|3x12|
|	1回目で命令を理解できた(カスタムオペレータ)		|3x6|
|	2回目以上で命令を理解できた					|3x1|
|***First Command Successfully Solved:***||
|	Command Category 1を成功				|12|
|	Command Category 2を成功				|24|
|	Command Category 3を成功				|36|
|***Second Command Successfully Solved:***||
|	Command Category 1を成功				|24|
|	Command Category 2を成功				|48|
|	Command Category 3を成功				|72|
|***Third Command Successfully Solved:***||
|	Command Category 1を成功				|48|
|	Command Category 2を成功				|96|
|	Command Category 3を成功				|144|
|***Leave the arena:***||
|	全てのコマンドを実行した後アリーナから退出	|12|
|||
|***Special penaltie & bonuses:***	||
|　Not attending					|-50|
|　Outstanding performance		|20|
|||
|合計(penaltiesとbonusを除いて)   |300|